<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß™ –¢–µ—Å—Ç –ù–æ–≤–æ–≥–æ –ë–æ—Ç–∞</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #4a90e2;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .status-box {
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: bold;
        }
        
        .status-ok {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .status-error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .btn {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: background 0.3s;
        }
        
        .btn:hover {
            background: #357abd;
        }
        
        .step {
            margin: 20px 0;
            padding: 20px;
            border-left: 4px solid #4a90e2;
            background: #f8f9fa;
        }
        
        .code {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 10px 0;
            white-space: pre-wrap;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ –¢–µ—Å—Ç –ù–æ–≤–æ–≥–æ Telegram –ë–æ—Ç–∞</h1>
        
        <div class="step">
            <h3>ü§ñ –ù–æ–≤—ã–π —Ç–æ–∫–µ–Ω:</h3>
            <div class="code">7578308615:AAE3CHZWnj67k2g4oNJp3dve6ng0k2hMq8M</div>
        </div>
        
        <div class="step">
            <h3>üë§ –°—Ç–∞—Ä—ã–π Chat ID (–Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π!):</h3>
            <div class="code">763907736</div>
        </div>
        
        <div class="step">
            <h3>üîç –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:</h3>
            <button class="btn" onclick="checkBot()">1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–æ—Ç–∞</button>
            <button class="btn" onclick="checkMessages()">2Ô∏è‚É£ –ö—Ç–æ –ø–∏—Å–∞–ª –±–æ—Ç—É</button>
            <button class="btn" onclick="testSend()">3Ô∏è‚É£ –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏</button>
        </div>
        
        <div id="results"></div>
        
        <div class="step">
            <h3>‚ö° –ë–´–°–¢–†–´–ï –î–ï–ô–°–¢–í–ò–Ø:</h3>
            <ol>
                <li><strong>–ù–∞–π–¥–∏—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞</strong> –≤ Telegram (–ø–æ –∏–º–µ–Ω–∏ –∏–∑ @BotFather)</li>
                <li><strong>–ù–∞–∂–º–∏—Ç–µ START</strong> –∏ –Ω–∞–ø–∏—à–∏—Ç–µ: "–ü—Ä–∏–≤–µ—Ç!"</li>
                <li><strong>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤—ã—à–µ</strong> –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏</li>
                <li><strong>–ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π Chat ID</strong> –∏ –æ–±–Ω–æ–≤–∏–º –∫–æ–¥</li>
            </ol>
        </div>
    </div>

    <script>
        const BOT_TOKEN = '7578308615:AAE3CHZWnj67k2g4oNJp3dve6ng0k2hMq8M';
        const OLD_CHAT_ID = '763907736';
        
        function addResult(html) {
            document.getElementById('results').innerHTML += html;
        }
        
        async function checkBot() {
            addResult('<h3>ü§ñ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞:</h3>');
            
            try {
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/getMe`);
                const data = await response.json();
                
                if (data.ok) {
                    addResult(`
                        <div class="status-box status-ok">
                            ‚úÖ –ù–û–í–´–ô –ë–û–¢ –ê–ö–¢–ò–í–ï–ù!<br>
                            üìõ –ò–º—è: ${data.result.first_name}<br>
                            üîó Username: @${data.result.username}<br>
                            üÜî ID: ${data.result.id}
                        </div>
                    `);
                } else {
                    addResult(`
                        <div class="status-box status-error">
                            ‚ùå –û–®–ò–ë–ö–ê: ${data.description}
                        </div>
                    `);
                }
            } catch (error) {
                addResult(`
                    <div class="status-box status-error">
                        ‚ùå –°–ï–¢–ï–í–ê–Ø –û–®–ò–ë–ö–ê: ${error.message}
                    </div>
                `);
            }
        }
        
        async function checkMessages() {
            addResult('<h3>üì® –ö—Ç–æ –ø–∏—Å–∞–ª –Ω–æ–≤–æ–º—É –±–æ—Ç—É:</h3>');
            
            try {
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/getUpdates`);
                const data = await response.json();
                
                if (data.ok) {
                    if (data.result.length > 0) {
                        const uniqueChats = new Map();
                        
                        data.result.forEach(update => {
                            if (update.message && update.message.chat) {
                                const chat = update.message.chat;
                                const chatId = chat.id.toString();
                                const chatName = chat.first_name || chat.username || `ID: ${chatId}`;
                                const username = chat.username ? `@${chat.username}` : '–ù–µ—Ç username';
                                
                                uniqueChats.set(chatId, {
                                    id: chatId,
                                    name: chatName,
                                    username: username,
                                    lastMessage: update.message.text || '[–ù–µ—Ç —Ç–µ–∫—Å—Ç–∞]'
                                });
                            }
                        });
                        
                        let chatsList = `<div class="status-box status-ok"><strong>üë• –ù–∞–π–¥–µ–Ω–æ ${uniqueChats.size} –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π:</strong><br>`;
                        uniqueChats.forEach((chat, chatId) => {
                            const isOldId = chatId === OLD_CHAT_ID;
                            chatsList += `‚Ä¢ ${chat.name} (${chat.username}) - ID: <strong>${chatId}</strong>`;
                            if (isOldId) {
                                chatsList += ` <span style="color: orange;">‚ö†Ô∏è –°–¢–ê–†–´–ô ID</span>`;
                            } else {
                                chatsList += ` <span style="color: green;">‚úÖ –ù–û–í–´–ô</span>`;
                            }
                            chatsList += `<br>  –°–æ–æ–±—â–µ–Ω–∏–µ: "${chat.lastMessage}"<br><br>`;
                        });
                        chatsList += '</div>';
                        
                        addResult(chatsList);
                    } else {
                        addResult(`
                            <div class="status-box status-error">
                                ‚ùå –ù–ò–ö–¢–û –ù–ï –ü–ò–°–ê–õ –ù–û–í–û–ú–£ –ë–û–¢–£!<br>
                                –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –≤ Telegram –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –µ–º—É —Å–æ–æ–±—â–µ–Ω–∏–µ.
                            </div>
                        `);
                    }
                } else {
                    addResult(`
                        <div class="status-box status-error">
                            ‚ùå –û–®–ò–ë–ö–ê: ${data.description}
                        </div>
                    `);
                }
            } catch (error) {
                addResult(`
                    <div class="status-box status-error">
                        ‚ùå –°–ï–¢–ï–í–ê–Ø –û–®–ò–ë–ö–ê: ${error.message}
                    </div>
                `);
            }
        }
        
        async function testSend() {
            addResult('<h3>üì§ –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ (—Å—Ç–∞—Ä—ã–π Chat ID):</h3>');
            
            try {
                const testMessage = `üß™ –¢–ï–°–¢ –ù–û–í–û–ì–û –ë–û–¢–ê\n\n‚è∞ –í—Ä–µ–º—è: ${new Date().toLocaleString('ru-RU')}\nü§ñ –¢–æ–∫–µ–Ω: ...${BOT_TOKEN.slice(-10)}\nüë§ Chat ID: ${OLD_CHAT_ID}`;
                
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: OLD_CHAT_ID,
                        text: testMessage
                    })
                });
                
                const data = await response.json();
                
                if (data.ok) {
                    addResult(`
                        <div class="status-box status-ok">
                            ‚úÖ –û–¢–ü–†–ê–í–õ–ï–ù–û! –°—Ç–∞—Ä—ã–π Chat ID —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤—ã–º –±–æ—Ç–æ–º!
                        </div>
                    `);
                } else {
                    addResult(`
                        <div class="status-box status-error">
                            ‚ùå –ù–ï –û–¢–ü–†–ê–í–õ–ï–ù–û!<br>
                            –û—à–∏–±–∫–∞: ${data.description}<br><br>
                            üí° –ü—Ä–∏—á–∏–Ω—ã:<br>
                            ‚Ä¢ –°—Ç–∞—Ä—ã–π Chat ID –Ω–µ –ø–∏—Å–∞–ª –Ω–æ–≤–æ–º—É –±–æ—Ç—É<br>
                            ‚Ä¢ –ù—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π Chat ID<br>
                            ‚Ä¢ –ü–æ–ª—É—á–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç–∞
                        </div>
                    `);
                }
            } catch (error) {
                addResult(`
                    <div class="status-box status-error">
                        ‚ùå –°–ï–¢–ï–í–ê–Ø –û–®–ò–ë–ö–ê: ${error.message}
                    </div>
                `);
            }
        }
    </script>
</body>
</html>


