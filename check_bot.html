<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Telegram Bot</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #4a90e2;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .status-box {
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: bold;
        }
        
        .status-ok {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .status-error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .status-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        
        .btn {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: background 0.3s;
        }
        
        .btn:hover {
            background: #357abd;
        }
        
        .code {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 10px 0;
            white-space: pre-wrap;
            word-break: break-all;
        }
        
        .step {
            margin: 20px 0;
            padding: 20px;
            border-left: 4px solid #4a90e2;
            background: #f8f9fa;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4a90e2;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Telegram Bot</h1>
        
        <div class="step">
            <h3>üîß –¢–æ–∫–µ–Ω –±–æ—Ç–∞:</h3>
            <div class="code">7578308615:AAE3CHZWnj67k2g4oNJp3dve6ng0k2hMq8M</div>
        </div>
        
        <div class="step">
            <h3>üìä –¢–µ—Å—Ç—ã:</h3>
            <button class="btn" onclick="checkBotInfo()">1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ</button>
            <button class="btn" onclick="checkUpdates()">2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç—É</button>
            <button class="btn" onclick="testSendMessage()">3Ô∏è‚É£ –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è</button>
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º –±–æ—Ç–∞...</p>
        </div>
        
        <div id="results"></div>
        
        <div class="step">
            <h3>üö® –ï—Å–ª–∏ –±–æ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:</h3>
            <ol>
                <li><strong>–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞:</strong> –ù–∞–ø–∏—à–∏—Ç–µ @BotFather ‚Üí /newbot</li>
                <li><strong>–ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω</strong> –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –≤ –∫–æ–¥–µ</li>
                <li><strong>–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –±–æ—Ç–∞:</strong> –ù–∞–π–¥–∏—Ç–µ –µ–≥–æ –≤ Telegram –∏ –Ω–∞–∂–º–∏—Ç–µ START</li>
            </ol>
        </div>
    </div>

    <script>
        const BOT_TOKEN = '7578308615:AAE3CHZWnj67k2g4oNJp3dve6ng0k2hMq8M';
        const TEST_CHAT_ID = '763907736';
        
        function showLoading() {
            document.getElementById('loading').style.display = 'block';
        }
        
        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }
        
        function addResult(html) {
            document.getElementById('results').innerHTML += html;
        }
        
        async function checkBotInfo() {
            showLoading();
            addResult('<h3>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–æ—Ç–µ:</h3>');
            
            try {
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/getMe`);
                const data = await response.json();
                
                if (data.ok) {
                    addResult(`
                        <div class="status-box status-ok">
                            ‚úÖ –ë–û–¢ –ê–ö–¢–ò–í–ï–ù!<br>
                            üìõ –ò–º—è: ${data.result.first_name}<br>
                            üîó Username: @${data.result.username}<br>
                            üÜî ID: ${data.result.id}<br>
                            ü§ñ –ú–æ–∂–µ—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—Ç—å—Å—è –∫ –≥—Ä—É–ø–ø–∞–º: ${data.result.can_join_groups ? '–î–∞' : '–ù–µ—Ç'}<br>
                            üìù –ú–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è: ${data.result.can_read_all_group_messages ? '–î–∞' : '–ù–µ—Ç'}
                        </div>
                    `);
                } else {
                    addResult(`
                        <div class="status-box status-error">
                            ‚ùå –û–®–ò–ë–ö–ê: ${data.description}<br>
                            –ö–æ–¥ –æ—à–∏–±–∫–∏: ${data.error_code}
                        </div>
                    `);
                }
            } catch (error) {
                addResult(`
                    <div class="status-box status-error">
                        ‚ùå –°–ï–¢–ï–í–ê–Ø –û–®–ò–ë–ö–ê: ${error.message}
                    </div>
                `);
            }
            
            hideLoading();
        }
        
        async function checkUpdates() {
            showLoading();
            addResult('<h3>üì® –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç—É:</h3>');
            
            try {
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/getUpdates`);
                const data = await response.json();
                
                if (data.ok) {
                    if (data.result.length > 0) {
                        addResult(`
                            <div class="status-box status-ok">
                                ‚úÖ –ù–ê–ô–î–ï–ù–û ${data.result.length} –°–û–û–ë–©–ï–ù–ò–ô!
                            </div>
                        `);
                        
                        const uniqueChats = new Map();
                        data.result.forEach(update => {
                            if (update.message && update.message.chat) {
                                const chat = update.message.chat;
                                const chatId = chat.id.toString();
                                const chatName = chat.first_name || chat.username || `ID: ${chatId}`;
                                const username = chat.username ? `@${chat.username}` : '–ù–µ—Ç username';
                                
                                uniqueChats.set(chatId, {
                                    id: chatId,
                                    name: chatName,
                                    username: username,
                                    lastMessage: update.message.text || '[–ù–µ—Ç —Ç–µ–∫—Å—Ç–∞]'
                                });
                            }
                        });
                        
                        let chatsList = '<div class="status-box status-ok"><strong>üë• –ö—Ç–æ –ø–∏—Å–∞–ª –±–æ—Ç—É:</strong><br>';
                        uniqueChats.forEach((chat, chatId) => {
                            chatsList += `‚Ä¢ ${chat.name} (${chat.username}) - ID: ${chatId}<br>`;
                            chatsList += `  –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: "${chat.lastMessage}"<br><br>`;
                        });
                        chatsList += '</div>';
                        
                        addResult(chatsList);
                    } else {
                        addResult(`
                            <div class="status-box status-warning">
                                ‚ö†Ô∏è –ù–ï–¢ –°–û–û–ë–©–ï–ù–ò–ô!<br>
                                –ù–∏–∫—Ç–æ –µ—â–µ –Ω–µ –ø–∏—Å–∞–ª –±–æ—Ç—É.<br>
                                –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –≤ Telegram –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –µ–º—É –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
                            </div>
                        `);
                    }
                } else {
                    addResult(`
                        <div class="status-box status-error">
                            ‚ùå –û–®–ò–ë–ö–ê: ${data.description}
                        </div>
                    `);
                }
            } catch (error) {
                addResult(`
                    <div class="status-box status-error">
                        ‚ùå –°–ï–¢–ï–í–ê–Ø –û–®–ò–ë–ö–ê: ${error.message}
                    </div>
                `);
            }
            
            hideLoading();
        }
        
        async function testSendMessage() {
            showLoading();
            addResult('<h3>üì§ –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:</h3>');
            
            try {
                const testMessage = `üß™ –¢–ï–°–¢–û–í–û–ï –°–û–û–ë–©–ï–ù–ò–ï\n\n‚è∞ –í—Ä–µ–º—è: ${new Date().toLocaleString('ru-RU')}\nü§ñ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!`;
                
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: TEST_CHAT_ID,
                        text: testMessage,
                        parse_mode: 'HTML'
                    })
                });
                
                const data = await response.json();
                
                if (data.ok) {
                    addResult(`
                        <div class="status-box status-ok">
                            ‚úÖ –°–û–û–ë–©–ï–ù–ò–ï –û–¢–ü–†–ê–í–õ–ï–ù–û!<br>
                            üì® Message ID: ${data.result.message_id}<br>
                            üë§ –ü–æ–ª—É—á–∞—Ç–µ–ª—å: ${TEST_CHAT_ID}<br>
                            üïê –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏: ${new Date(data.result.date * 1000).toLocaleString('ru-RU')}
                        </div>
                    `);
                } else {
                    addResult(`
                        <div class="status-box status-error">
                            ‚ùå –ù–ï –£–î–ê–õ–û–°–¨ –û–¢–ü–†–ê–í–ò–¢–¨!<br>
                            –û—à–∏–±–∫–∞: ${data.description}<br>
                            –ö–æ–¥: ${data.error_code}<br><br>
                            üí° –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:<br>
                            ‚Ä¢ –ü–æ–ª—É—á–∞—Ç–µ–ª—å –Ω–µ –ø–∏—Å–∞–ª –±–æ—Ç—É<br>
                            ‚Ä¢ –ü–æ–ª—É—á–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç–∞<br>
                            ‚Ä¢ –ù–µ–≤–µ—Ä–Ω—ã–π Chat ID
                        </div>
                    `);
                }
            } catch (error) {
                addResult(`
                    <div class="status-box status-error">
                        ‚ùå –°–ï–¢–ï–í–ê–Ø –û–®–ò–ë–ö–ê: ${error.message}
                    </div>
                `);
            }
            
            hideLoading();
        }
    </script>
</body>
</html>
